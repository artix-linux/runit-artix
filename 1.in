#!/bin/bash

PATH=/usr/bin:/usr/sbin

. @RCLIBDIR@/functions

RC_SYSINIT=(api-fs hostname hwclock kmod-static-nodes tmpfiles-dev udev
        console-setup net-lo fsck remount-rw mount-all swap timezone
        random-seed tmpfiles-setup sysusers dmesg sysctl binfmt cleanup)

# Prints distro name and URL
print_welcome

calc_columns

for service in ${RC_SYSINIT[@]};do
    rc-sv start $service
    [[ "$service" == api-fs ]] && rc-sv start bootlogd
    [[ "$service" == udev ]] && calc_columns
done

rc-sv stop bootlogd

install -m100 /dev/null @RUNDIR@/stopit

status "Initialization complete"
