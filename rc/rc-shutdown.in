#!/bin/bash

. @RCLIBDIR@/functions
. @RCDIR@/rc.conf

print_leave

[[ -x @RCDIR@/rc.local.shutdown ]] && @RCDIR@/rc.local.shutdown

# run rc-sv

rc-sv stop random-seed

rc-sv stop timezone

rc-sv stop cleanup

if [[ $USELVM = [yY][eE][sS] && -x $(type -P lvm) && -d /sys/block ]];then

    rc-sv stop lvm

    [[ -f /etc/crypttab && -x $(type -p cryptsetup) ]] && \
    rc-sv stop cryptsetup
fi

rc-sv stop udev

rc-sv start kill-all

rc-sv stop swap

rc-sv stop api-fs

rc-sv start mount-ro
